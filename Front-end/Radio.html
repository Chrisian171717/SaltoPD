<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="radio.css">
    <script src="../Back-end/Radio.js"></script>
    <link rel="icon" href="logo.png" type="image/png">
    <title>Sistema de Radio</title>
</head>
<body>
    <nav class="nav-tabs" aria-label="NavegaciÃ³n principal">
        <ul class="nav-tabs__list">
            <li><a href="principal.html" class="nav-tabs__link"><img src="Logo.png" alt="SecciÃ³n principal" class="nav-tabs__icon" /></a></li>
            <li><a href="civiles.html" class="nav-tabs__link"><img src="Civil.png" alt="SecciÃ³n Civil" class="nav-tabs__icon" /></a></li>
            <li><a href="Denuncias.html" class="nav-tabs__link"><img src="Denuncias.png" alt="SecciÃ³n Denuncias" class="nav-tabs__icon" /></a></li>
            <li><a href="Vehiculo2.0.html" class="nav-tabs__link"><img src="Vehiculo.png" alt="SecciÃ³n VehÃ­culo" class="nav-tabs__icon" /></a></li>
            <li><a href="Mapa.html" class="nav-tabs__link"><img src="mapa.png" alt="SecciÃ³n Mapa" class="nav-tabs__icon" /></a></li>
            <li><a href="Escaner Facial.html" class="nav-tabs__link"><img src="Escaner Facial.png" alt="SecciÃ³n Escaner" class="nav-tabs__icon" /></a></li>
        </ul>
    </nav>

    <div class="radio-dashboard">

        <!-- Encabezado principal -->
        <header class="radio-header" aria-label="Encabezado del sistema de radio policial">
            <h1>ğŸš” RADIO POLICIAL</h1>
            <p>Sistema de Comunicaciones â€“ Distrito Central</p>
        </header>

        <!-- InformaciÃ³n de oficiales -->
        <section class="officer-section" aria-label="InformaciÃ³n de oficiales">
            <div class="officer-card">
                <h3>ğŸ‘®â€â™‚ï¸ Oficial de Servicio</h3>
                <ul>
                    <li><strong>Nombre:</strong> Sargento Rodriguez</li>
                    <li><strong>Rango:</strong> Sargento Primero</li>
                    <li><strong>ID:</strong> 10347</li>
                </ul>
            </div>
            <div class="officer-card">
                <h3>ğŸ“¡ Central de Comunicaciones</h3>
                <ul>
                    <li><strong>Operador:</strong> Cabo Martinez</li>
                    <li><strong>Turno:</strong> 14:00 - 22:00</li>
                    <li><strong>Frecuencia:</strong> 460.125 MHz</li>
                </ul>
            </div>
        </section>

        <!-- NavegaciÃ³n por pestaÃ±as -->
        <nav class="radio-tabs" aria-label="Secciones del sistema">
            <button class="tab-button active" data-tab="unidades">ğŸ“‹ Unidades</button>
            <button class="tab-button" data-tab="radio">ğŸ“» Radio</button>
            <button class="tab-button" data-tab="emergencias">ğŸš¨ Emergencias</button>
            <button class="tab-button" data-tab="registro">ğŸ“ Registro</button>
        </nav>

        <!-- SecciÃ³n Unidades -->
        <section id="unidades" class="tab-content active" aria-label="Estado de unidades">
            <h2>ğŸš” Estado de Unidades</h2>
            
            <!-- Formulario para agregar/editar unidad -->
            <div class="form-container">
                <h3 id="form-unidad-titulo">â• Agregar Nueva Unidad</h3>
                <form id="form-unidad" method="POST" action="../Back-end/RadioGuardar.php" class="crud-form">
                    <input type="hidden" name="tipo_guardar" value="unidad">
                    <input type="hidden" name="id_unidad" id="id_unidad" value="">
                    
                    <div class="form-row">
                        <input type="text" name="codigo" id="codigo_unidad" placeholder="CÃ³digo (ej: Zeta-01)" required>
                        <select name="tipo" id="tipo_unidad" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="moto">Moto</option>
                            <option value="auto">Auto</option>
                            <option value="camioneta">Camioneta</option>
                            <option value="helicoptero">HelicÃ³ptero</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <select name="estado" id="estado_unidad" required>
                            <option value="">Seleccionar estado</option>
                            <option value="disponible">Disponible</option>
                            <option value="ocupado">Ocupado</option>
                            <option value="fuera_servicio">Fuera de servicio</option>
                        </select>
                        <input type="text" name="oficial_nombre" id="oficial_nombre_unidad" placeholder="Nombre del oficial" required>
                    </div>
                    
                    <div class="form-row">
                        <input type="text" name="oficial_rango" id="oficial_rango_unidad" placeholder="Rango del oficial" required>
                        <input type="text" name="sector" id="sector_unidad" placeholder="Sector" required>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="btn-guardar">ğŸ’¾ Guardar Unidad</button>
                        <button type="button" class="btn-cancelar" onclick="cancelarEdicionUnidad()">âŒ Cancelar</button>
                    </div>
                </form>
            </div>
            
            <div class="units-grid" id="unidades-container">
                <!-- Las unidades se cargarÃ¡n dinÃ¡micamente desde la base de datos -->
                <div class="no-data">
                    <p>No hay unidades registradas. Agrega la primera unidad usando el formulario arriba.</p>
                </div>
            </div>
        </section>

        <!-- SecciÃ³n Radio -->
        <section id="radio" class="tab-content" aria-label="Control de radio">
            <h2>ğŸ“» Control de Radio</h2>
            <div class="radio-controls">
                <div class="frequency-display">FREQ: <span id="frequency">460.125</span> MHz</div>
                <div class="control-buttons">
                    <button type="button" class="control-btn" id="transmitirBtn">ğŸ¤ Transmitir</button>
                    <button type="button" class="control-btn" onclick="cambiarFrecuencia()">ğŸ“¡ Cambiar Frecuencia</button>
                    <button type="button" class="control-btn" onclick="reportarEmergencia()">ğŸš¨ Emergencia</button>
                    <button type="button" class="control-btn" onclick="limpiarCanal()">ğŸ”‡ Limpiar Canal</button>
                </div>
            </div>
            
            <!-- GestiÃ³n de Comunicaciones -->
            <div class="form-container">
                <h3>ğŸ“¨ GestiÃ³n de Comunicaciones</h3>
                
                <!-- Formulario para nueva comunicaciÃ³n -->
                <div class="comms-management">
                    <h4>â• Nueva ComunicaciÃ³n</h4>
                    <form method="POST" action="../Back-end/RadioEnviar.php" class="message-form">
                        <div class="form-row">
                            <input type="text" name="emisor" placeholder="Tu nombre" required>
                            <input type="text" name="mensaje" placeholder="Escribe tu mensaje..." required>
                            <button type="submit">ğŸ¤ Transmitir Mensaje</button>
                        </div>
                    </form>
                </div>

                <!-- Formulario para editar comunicaciÃ³n -->
                <div class="comms-edit-form" id="comms-edit-form" style="display: none;">
                    <h4>âœï¸ Editar ComunicaciÃ³n</h4>
                    <form id="form-editar-comunicacion" class="message-form">
                        <input type="hidden" name="id_comunicacion" id="id_comunicacion">
                        <div class="form-row">
                            <input type="text" name="emisor" id="emisor_edit" placeholder="Emisor" required>
                            <input type="text" name="mensaje" id="mensaje_edit" placeholder="Mensaje" required>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" class="btn-guardar">ğŸ’¾ Guardar Cambios</button>
                            <button type="button" class="btn-cancelar" onclick="cancelarEdicionComunicacion()">âŒ Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="log-container">
                <h3>ğŸ“‹ Comunicaciones Recientes</h3>
                <div id="radioLog">
                    <!-- Las comunicaciones se cargarÃ¡n dinÃ¡micamente desde la base de datos -->
                    <div class="no-data">
                        <p>No hay comunicaciones recientes. EnvÃ­a el primer mensaje usando el formulario arriba.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SecciÃ³n Emergencias -->
        <section id="emergencias" class="tab-content" aria-label="Sistema de emergencias">
            <h2>ğŸš¨ Sistema de Emergencias</h2>
            
            <!-- Formulario para agregar/editar emergencia -->
            <div class="form-container">
                <h3 id="form-emergencia-titulo">ğŸš¨ Nueva Emergencia</h3>
                <form id="form-emergencia" method="POST" action="../Back-end/RadioGuardar.php" class="crud-form">
                    <input type="hidden" name="tipo_guardar" value="emergencia">
                    <input type="hidden" name="id_emergencia" id="id_emergencia" value="">
                    
                    <div class="form-row">
                        <input type="text" name="codigo" id="codigo_emergencia" placeholder="CÃ³digo (ej: 10-54)" required>
                        <input type="text" name="ubicacion" id="ubicacion_emergencia" placeholder="UbicaciÃ³n" required>
                    </div>
                    
                    <div class="form-row">
                        <textarea name="descripcion" id="descripcion_emergencia" placeholder="DescripciÃ³n de la emergencia" required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <input type="text" name="unidades_asignadas" id="unidades_asignadas_emergencia" placeholder="Unidades asignadas (ej: Zeta-01, Zeta-02)">
                        <select name="activa" id="activa_emergencia" required>
                            <option value="1">Activa</option>
                            <option value="0">Inactiva</option>
                        </select>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="btn-guardar">ğŸ’¾ Guardar Emergencia</button>
                        <button type="button" class="btn-cancelar" onclick="cancelarEdicionEmergencia()">âŒ Cancelar</button>
                    </div>
                </form>
            </div>
            
            <div class="emergencies-grid" id="emergencias-container">
                <!-- Las emergencias se cargarÃ¡n dinÃ¡micamente desde la base de datos -->
                <div class="no-data">
                    <p>No hay emergencias registradas. Agrega la primera emergencia usando el formulario arriba.</p>
                </div>
            </div>

            <!-- InformaciÃ³n adicional sobre cÃ³digos de emergencia -->
            <div class="units-grid">
                <article class="unit-card">
                    <h3>ğŸš¨ CÃ³digos de Emergencia</h3>
                    <ul>
                        <li><strong>10-13:</strong> Oficial necesita ayuda</li>
                        <li><strong>10-54:</strong> Accidente de trÃ¡fico</li>
                        <li><strong>10-56:</strong> Persona intoxicada</li>
                        <li><strong>Code 3:</strong> MÃ¡xima prioridad</li>
                    </ul>
                </article>
                <article class="unit-card">
                    <h3>ğŸ“ Zonas de Riesgo Alto</h3>
                    <ul>
                        <li><strong>Zona Roja:</strong> Centro HistÃ³rico</li>
                        <li><strong>Zona Amarilla:</strong> Sector Industrial</li>
                        <li><strong>Patrulla Extra:</strong> Parque Central</li>
                    </ul>
                </article>
            </div>
        </section>

        <!-- SecciÃ³n Registro -->
        <section id="registro" class="tab-content" aria-label="Registro de actividades">
            <h2>ğŸ“ Registro Completo de Actividades</h2>
            
            <div class="registro-tabs">
                <button class="subtab-button active" data-subtab="comunicaciones">Comunicaciones</button>
                <button class="subtab-button" data-subtab="emergencias">Emergencias</button>
                <button class="subtab-button" data-subtab="ubicaciones">Ubicaciones</button>
            </div>
            
            <!-- Sub-pestaÃ±a Comunicaciones -->
            <div id="comunicaciones" class="subtab-content active">
                <h3>ğŸ“¨ Historial de Comunicaciones</h3>
                <div class="log-container" id="comunicaciones-container">
                    <!-- Las comunicaciones se cargarÃ¡n dinÃ¡micamente desde la base de datos -->
                    <div class="no-data">
                        <p>No hay comunicaciones registradas.</p>
                    </div>
                </div>
            </div>
            
            <!-- Sub-pestaÃ±a Emergencias -->
            <div id="emergencias-registro" class="subtab-content">
                <h3>ğŸš¨ Historial de Emergencias</h3>
                <div class="log-container" id="emergencias-registro-container">
                    <!-- Las emergencias se cargarÃ¡n dinÃ¡micamente desde la base de datos -->
                    <div class="no-data">
                        <p>No hay emergencias registradas.</p>
                    </div>
                </div>
            </div>
            
            <!-- Sub-pestaÃ±a Ubicaciones -->
            <div id="ubicaciones" class="subtab-content">
                <h3>ğŸ“ GestiÃ³n de Ubicaciones</h3>
                
                <!-- Formulario para agregar/editar ubicaciÃ³n -->
                <div class="form-container">
                    <h4 id="form-ubicacion-titulo">â• Nueva UbicaciÃ³n</h4>
                    <form id="form-ubicacion" method="POST" action="../Back-end/RadioGuardar.php" class="crud-form">
                        <input type="hidden" name="tipo_guardar" value="ubicacion">
                        <input type="hidden" name="id_ubicacion" id="id_ubicacion" value="">
                        
                        <div class="form-row">
                            <input type="text" name="nombre" id="nombre_ubicacion" placeholder="Nombre de la ubicaciÃ³n" required>
                            <select name="tipo" id="tipo_ubicacion" required>
                                <option value="">Tipo</option>
                                <option value="denuncia">Denuncia</option>
                                <option value="vehiculo">VehÃ­culo</option>
                                <option value="civil">Civil</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <input type="text" name="lat" id="lat_ubicacion" placeholder="Latitud" required>
                            <input type="text" name="lng" id="lng_ubicacion" placeholder="Longitud" required>
                        </div>
                        
                        <div class="form-row">
                            <textarea name="descripcion" id="descripcion_ubicacion" placeholder="DescripciÃ³n"></textarea>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="submit" class="btn-guardar">ğŸ’¾ Guardar UbicaciÃ³n</button>
                            <button type="button" class="btn-cancelar" onclick="cancelarEdicionUbicacion()">âŒ Cancelar</button>
                        </div>
                    </form>
                </div>
                
                <div class="ubicaciones-grid" id="ubicaciones-container">
                    <h4>ğŸ“ Ubicaciones Registradas</h4>
                    <!-- Las ubicaciones se cargarÃ¡n dinÃ¡micamente desde la base de datos -->
                    <div class="no-data">
                        <p>No hay ubicaciones registradas. Agrega la primera ubicaciÃ³n usando el formulario arriba.</p>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        // Sistema de pestaÃ±as y funcionalidades bÃ¡sicas
        document.addEventListener('DOMContentLoaded', function() {
            inicializarSistema();
        });

        function inicializarSistema() {
            // Funcionalidad de pestaÃ±as principales
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Remover clase active de todos los botones y contenidos
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Agregar clase active al botÃ³n y contenido actual
                    button.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                    
                    // Si es la pestaÃ±a de radio, actualizar logs inmediatamente
                    if (tabId === 'radio') {
                        actualizarLogsRadio();
                    }
                });
            });

            // Funcionalidad de sub-pestaÃ±as en registro
            const subtabButtons = document.querySelectorAll('.subtab-button');
            const subtabContents = document.querySelectorAll('.subtab-content');
            
            subtabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const subtabId = button.getAttribute('data-subtab');
                    
                    // Remover clase active de todos los botones y contenidos
                    subtabButtons.forEach(btn => btn.classList.remove('active'));
                    subtabContents.forEach(content => content.classList.remove('active'));
                    
                    // Agregar clase active al botÃ³n y contenido actual
                    button.classList.add('active');
                    
                    // Manejar el ID especial para emergencias en registro
                    const contentId = subtabId === 'emergencias' ? 'emergencias-registro' : subtabId;
                    document.getElementById(contentId).classList.add('active');
                });
            });

            // BotÃ³n de transmitir
            const transmitirBtn = document.getElementById('transmitirBtn');
            if (transmitirBtn) {
                transmitirBtn.addEventListener('click', function() {
                    alert('Modo transmisiÃ³n activado - Habla ahora');
                });
            }

            // Inicializar formulario de ediciÃ³n de comunicaciones
            const formEditarComunicacion = document.getElementById('form-editar-comunicacion');
            if (formEditarComunicacion) {
                formEditarComunicacion.addEventListener('submit', function(e) {
                    e.preventDefault();
                    guardarEdicionComunicacion();
                });
            }
        }

        // Funciones para Comunicaciones (Radio)
        function editarComunicacion(id, emisor, mensaje) {
            document.getElementById('id_comunicacion').value = id;
            document.getElementById('emisor_edit').value = emisor;
            document.getElementById('mensaje_edit').value = mensaje;
            
            // Mostrar formulario de ediciÃ³n
            document.getElementById('comms-edit-form').style.display = 'block';
            
            // Scroll al formulario
            document.getElementById('comms-edit-form').scrollIntoView({ behavior: 'smooth' });
        }

        function cancelarEdicionComunicacion() {
            document.getElementById('id_comunicacion').value = '';
            document.getElementById('emisor_edit').value = '';
            document.getElementById('mensaje_edit').value = '';
            document.getElementById('comms-edit-form').style.display = 'none';
        }

        function guardarEdicionComunicacion() {
            const id = document.getElementById('id_comunicacion').value;
            const emisor = document.getElementById('emisor_edit').value;
            const mensaje = document.getElementById('mensaje_edit').value;
            
            if (!id || !emisor || !mensaje) {
                alert('Por favor completa todos los campos');
                return;
            }
            
            fetch('../Back-end/Radio.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `action=editar_comunicacion&id=${id}&emisor=${encodeURIComponent(emisor)}&mensaje=${encodeURIComponent(mensaje)}`
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('ComunicaciÃ³n actualizada correctamente');
                    location.reload();
                } else {
                    alert('Error al actualizar la comunicaciÃ³n');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al actualizar la comunicaciÃ³n');
            });
        }

        function eliminarComunicacion(id) {
            if (confirm('Â¿EstÃ¡s seguro de que quieres eliminar esta comunicaciÃ³n?')) {
                fetch('../Back-end/Radio.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `action=delete_comunicacion&id=${id}`
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        location.reload();
                    } else {
                        alert('Error al eliminar la comunicaciÃ³n');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error al eliminar la comunicaciÃ³n');
                });
            }
        }

        // Funciones para Unidades
        function editarUnidad(id, codigo, tipo, estado, oficial_nombre, oficial_rango, sector) {
            document.getElementById('id_unidad').value = id;
            document.getElementById('codigo_unidad').value = codigo;
            document.getElementById('tipo_unidad').value = tipo;
            document.getElementById('estado_unidad').value = estado;
            document.getElementById('oficial_nombre_unidad').value = oficial_nombre;
            document.getElementById('oficial_rango_unidad').value = oficial_rango;
            document.getElementById('sector_unidad').value = sector;
            document.getElementById('form-unidad-titulo').textContent = 'âœï¸ Editar Unidad';
            
            // Scroll al formulario
            document.getElementById('form-unidad').scrollIntoView({ behavior: 'smooth' });
        }

        function cancelarEdicionUnidad() {
            document.getElementById('id_unidad').value = '';
            document.getElementById('codigo_unidad').value = '';
            document.getElementById('tipo_unidad').value = '';
            document.getElementById('estado_unidad').value = '';
            document.getElementById('oficial_nombre_unidad').value = '';
            document.getElementById('oficial_rango_unidad').value = '';
            document.getElementById('sector_unidad').value = '';
            document.getElementById('form-unidad-titulo').textContent = 'â• Agregar Nueva Unidad';
        }

        function eliminarUnidad(id) {
            if (confirm('Â¿EstÃ¡s seguro de que quieres eliminar esta unidad?')) {
                fetch('../Back-end/Radio.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `action=delete_unidad&id=${id}`
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        location.reload();
                    } else {
                        alert('Error al eliminar la unidad');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error al eliminar la unidad');
                });
            }
        }

        // Funciones para Emergencias
        function editarEmergencia(id, codigo, descripcion, ubicacion, unidades_asignadas, activa) {
            document.getElementById('id_emergencia').value = id;
            document.getElementById('codigo_emergencia').value = codigo;
            document.getElementById('descripcion_emergencia').value = descripcion;
            document.getElementById('ubicacion_emergencia').value = ubicacion;
            document.getElementById('unidades_asignadas_emergencia').value = unidades_asignadas;
            document.getElementById('activa_emergencia').value = activa;
            document.getElementById('form-emergencia-titulo').textContent = 'âœï¸ Editar Emergencia';
            
            // Scroll al formulario
            document.getElementById('form-emergencia').scrollIntoView({ behavior: 'smooth' });
        }

        function cancelarEdicionEmergencia() {
            document.getElementById('id_emergencia').value = '';
            document.getElementById('codigo_emergencia').value = '';
            document.getElementById('descripcion_emergencia').value = '';
            document.getElementById('ubicacion_emergencia').value = '';
            document.getElementById('unidades_asignadas_emergencia').value = '';
            document.getElementById('activa_emergencia').value = '1';
            document.getElementById('form-emergencia-titulo').textContent = 'ğŸš¨ Nueva Emergencia';
        }

        function eliminarEmergencia(id) {
            if (confirm('Â¿EstÃ¡s seguro de que quieres eliminar esta emergencia?')) {
                fetch('../Back-end/Radio.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `action=delete_emergencia&id=${id}`
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        location.reload();
                    } else {
                        alert('Error al eliminar la emergencia');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error al eliminar la emergencia');
                });
            }
        }

        // Funciones para Ubicaciones (Registro)
        function editarUbicacion(id, nombre, descripcion, lat, lng, tipo) {
            document.getElementById('id_ubicacion').value = id;
            document.getElementById('nombre_ubicacion').value = nombre;
            document.getElementById('descripcion_ubicacion').value = descripcion;
            document.getElementById('lat_ubicacion').value = lat;
            document.getElementById('lng_ubicacion').value = lng;
            document.getElementById('tipo_ubicacion').value = tipo;
            document.getElementById('form-ubicacion-titulo').textContent = 'âœï¸ Editar UbicaciÃ³n';
            
            // Scroll al formulario
            document.getElementById('form-ubicacion').scrollIntoView({ behavior: 'smooth' });
        }

        function cancelarEdicionUbicacion() {
            document.getElementById('id_ubicacion').value = '';
            document.getElementById('nombre_ubicacion').value = '';
            document.getElementById('descripcion_ubicacion').value = '';
            document.getElementById('lat_ubicacion').value = '';
            document.getElementById('lng_ubicacion').value = '';
            document.getElementById('tipo_ubicacion').value = '';
            document.getElementById('form-ubicacion-titulo').textContent = 'â• Nueva UbicaciÃ³n';
        }

        function eliminarUbicacion(id) {
            if (confirm('Â¿EstÃ¡s seguro de que quieres eliminar esta ubicaciÃ³n?')) {
                fetch('../Back-end/Radio.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `action=delete_ubicacion&id=${id}`
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        location.reload();
                    } else {
                        alert('Error al eliminar la ubicaciÃ³n');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error al eliminar la ubicaciÃ³n');
                });
            }
        }

        // Funciones de control de radio
        function cambiarFrecuencia() {
            const frecuencias = ['460.125', '460.250', '460.375', '460.500'];
            const frecuenciaDisplay = document.getElementById('frequency');
            const currentFreq = frecuenciaDisplay.textContent;
            const currentIndex = frecuencias.indexOf(currentFreq);
            const nextIndex = (currentIndex + 1) % frecuencias.length;
            frecuenciaDisplay.textContent = frecuencias[nextIndex];
            alert(`Frecuencia cambiada a: ${frecuencias[nextIndex]} MHz`);
        }

        function reportarEmergencia() {
            const emisor = prompt('Ingresa tu identificador:');
            if (emisor) {
                const mensaje = 'ğŸš¨ REPORTANDO EMERGENCIA - NECESITO ASISTENCIA INMEDIATA';
                // Enviar automÃ¡ticamente como comunicaciÃ³n de emergencia
                fetch('../Back-end/RadioEnviar.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `emisor=${encodeURIComponent(emisor)}&mensaje=${encodeURIComponent(mensaje)}`
                })
                .then(() => {
                    alert('Emergencia reportada. Refuerzos en camino.');
                    location.reload();
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error al reportar emergencia');
                });
            }
        }

        function limpiarCanal() {
            if (confirm('Â¿EstÃ¡s seguro de que quieres limpiar todas las comunicaciones recientes?')) {
                // AquÃ­ podrÃ­as implementar la lÃ³gica para limpiar comunicaciones
                alert('Canal limpiado. Todas las comunicaciones han sido archivadas.');
            }
        }
    </script>
</body>
</html>